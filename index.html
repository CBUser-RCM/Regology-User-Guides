<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>An RCM Instructional Module: Regology Workflow Optimization Series</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #f3f4f6;
        }
        .rcm-purple { background-color: #6A1B9A; color: #fff; }
        .rcm-text { color: #6A1B9A; }
        /* Custom Yellow Box for Directions */
        .rcm-yellow-box {
            background: #FFFDE7;
            border-left: 5px solid #FBC02D;
            color: #444;
            font-size: 1rem;
            font-weight: 500;
            margin: 1.2rem 0 1.2rem 0;
            padding: 1rem 1.25rem;
            border-radius: 0.5rem;
            text-align: left;
        }
        /* Custom RCM Logo styling for header */
        .rcm-logo {
            width: 145px;
            height: 145px;
            margin-right: 2.2rem;
            border-radius: 22px;
            background: #fff;
            box-shadow: 0 2px 8px rgba(106,27,154,0.12);
            flex-shrink: 0;
        }
        /* Container for the dynamic slide content, ensuring fixed height */
        .slide-container {
            min-height: 420px;
            max-height: 420px;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            justify-content: flex-start;
            padding: 0;
            gap: 0.8rem;
        }
        /* Inner slide content area */
        .slide-inner {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: stretch;
            /* padding-bottom: 32px; <-- REMOVED to make room for nav */
            padding-top: 8px;
            overflow-y: auto; /* Added for content overflow */
            overflow-x: hidden;
        }
        /* Box to contain the screenshot placeholder */
        .screenshot-box {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #faf9fc;
            border-radius: 10px;
            border: 2px solid #6A1B9A33;
            min-height: 180px;
            max-height: 180px;
            width: 100%;
            margin-bottom: 0.8rem;
        }
        /* Styling for the screenshot image */
        .screenshot {
            width: 93%;
            height: 160px;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(106,27,154,0.10);
            background: #faf9fc;
        }
        /* Title styling for each step */
        .step-title {
            font-size: 1.18rem;
            font-weight: 700;
            color: #6A1B9A;
            border-bottom: 2px solid #FBC02D;
            padding-bottom: 0.25rem;
            margin-bottom: 0.5rem;
            letter-spacing: 0.5px;
            text-align: left;
            width: 100%;
        }
        /* Icon for directions within yellow box */
        .direction-icon {
            font-size: 1.2em;
            color: #FBC02D;
            vertical-align: middle;
            margin-right: 0.3em;
        }
        /* TL;DR/Summary box style */
        .tldr-box {
            background: #F3E8FF;
            border-left: 5px solid #6A1B9A;
            color: #4B2C6A;
            font-size: 1rem;
            font-weight: 500;
            margin: 1.2rem 0;
            padding: 1rem 1.25rem;
            border-radius: 0.5rem;
            width: 100%;
            text-align: left;
        }
        /* General description text styling */
        .description {
            color: #2b2239;
            font-size: 1rem;
            margin-top: 0.4rem;
            margin-bottom: 0.7rem;
            text-align: left;
            max-width: 620px;
            padding-left: 8px;
            padding-right: 8px;
        }
        /* Footer branding */
        .rcm-footer {
            font-size: 0.95rem;
            color: #6A1B9A;
            text-align: center;
            margin-top: 1.2rem;
            padding-bottom: 0.5rem;
        }
        /* Footer navigation container - REMOVED */
        
        /* Mobile Responsiveness */
        @media (max-width: 700px) {
            .slide-container {
                min-height: 320px;
                max-height: 320px;
            }
            .slide-inner {
                /* padding-bottom: 24px; <-- REMOVED */
            }
            .screenshot-box {
                min-height: 90px;
                max-height: 90px;
            }
            .screenshot {
                height: 70px;
            }
            .rcm-logo {
                width: 90px;
                height: 90px;
                margin-right: 1rem;
            }
            /* .footer-nav { min-height: 44px; } <-- REMOVED */
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Main Guide Container -->
    <div id="guide-container" class="w-full max-w-xl bg-white shadow-2xl rounded-xl overflow-hidden">

        <!-- Header -->
        <header class="rcm-purple flex items-center px-6 py-6 gap-2">
            <!-- RCM Logo: Using specific GitHub RAW link -->
            <img src="https://raw.githubusercontent.com/CBUser-RCM/Regology-User-Guides/8b2853091c14574ad138e2a1a9eb58650f801702/images/rcm_logo.png" alt="RCM Logo" class="rcm-logo" id="rcm-logo-header" onerror="this.onerror=null; this.src='https://placehold.co/145x145/6A1B9A/ffffff?text=RCM+Logo'">
            <div>
                <h1 class="text-base font-semibold mb-1 tracking-tight text-left">Regology Workflow Optimization Series</h1>
                <h2 class="text-2xl font-bold mb-1 tracking-tight text-left">An RCM Instructional Module</h2>
                <div class="text-2xl font-bold mb-1 tracking-tight text-left">Adding LROs to the LRO Inventory</div>
            </div>
        </header>

        <!-- Content Area -->
        <main class="p-6 sm:p-8">
            <div id="slide-container" class="slide-container">
                <!-- Slide content will be rendered here by JavaScript -->
            </div>
        </main>

        <!-- Footer Navigation - REMOVED from here -->
        
        <div class="rcm-footer">Regulatory Change Management (RCM) | Coinbase</div>
    </div>

    <script>
        // Use a counter to track the current step index
        let currentStep = 0;

        // Base URL for GitHub raw content, including the commit hash and 'images/' path.
        const GITHUB_RAW_BASE_URL = 'https://raw.githubusercontent.com/CBUser-RCM/Regology-User-Guides/8b2853091c14574ad138e2a1a9eb58650f801702/images/';

        // Helper function to create the full image URL
        const getImageUrl = (filename) => {
            // Only prepend the base URL if a filename is provided and it's not custom HTML
            // Note: The .replace('./', '') is a cleanup for older local paths, but kept for robustness.
            return filename ? GITHUB_RAW_BASE_URL + filename.replace('./', '') : '';
        };

        // The array of instructional steps
        const steps = [
            {
                title: "TL;DR: Why This Training?",
                screenshot: "", // TLDR does not need a screenshot
                yellowBox: "", // No yellow box on first slide
                tldr: `
                    <div class="tldr-box">
                        <span class="font-bold">Why am I seeing this?</span>
                        <ul class="list-disc ml-6 mt-2 mb-2">
                            <li>Regology allows you to add new Legal and Regulatory Obligations (LROs) to the LRO Inventory during the processing workflow.</li>
                            <li><span class="rcm-text font-bold">Goal:</span> Keep our LRO Inventory evergreen & compliant.</li>
                            <li><span class="rcm-text font-bold">Training time:</span> 3â€“5 minutes</li>
                        </ul>
                    </div>
                `,
                description: `<span>Letâ€™s get started!</span>`
            },
            {
                title: "Start - New Step for Adding LROs",
                // Screenshot updated to use CUSTOM_HTML with the new raw URL
                screenshot: `CUSTOM_HTML:<div class="screenshot-box">
                    <img src="https://raw.githubusercontent.com/CBUser-RCM/Regology-User-Guides/d29c9ee634b0a33476369fba5cb516aa19af7ddf/images/S2.png" class="screenshot" alt="Start - New Step Screenshot" onerror="this.onerror=null; this.src='https://placehold.co/300x160/faf9fc/6A1B9A?text=Image+Placeholder'">
                </div>`, 
                yellowBox: `<span class="direction-icon">ðŸŸ¡</span>When an alert is Became Law or Final Rule, you must determine if it should be added. Use your judgment, but, if Applicable, likely the LRO should be added.<br><br>This step comes after completing the regular Alert processing workflow. See next slides.`,
                description: ``,
            },
            {
                title: "Step 1: Complete the Standard Alert Processing Workflow",
                // Screenshot URL corrected to use the raw GitHub link for the user-provided commit hash
                screenshot: `CUSTOM_HTML:<div class="screenshot-box">
                    <img src="https://raw.githubusercontent.com/CBUser-RCM/Regology-User-Guides/958c05cbcaa6bab75223211b7bc56bb26be8a404/images/S3.1.png" class="screenshot" alt="Step 1 Screenshot" onerror="this.onerror=null; this.src='https://placehold.co/300x160/faf9fc/6A1B9A?text=Image+Placeholder'">
                </div>`,
                yellowBox: `<span class="direction-icon">ðŸŸ¡</span>First, you must complete the standard alert processing workflow.<br><br>Mark the Alert Applicable, Following, or Excluded<br><br>Respond to the pop up by indicating whether the Alert is potentially impactful<br><br>Proceed to Screen 2 and complete the Initial Impact Assessment: <br>1. Select an impacted team. <br>2. Provide a description of your proposed implementation work in the comments field. <br>3. Close the alert<br>`,
                description: `<div style="max-width: 570px; text-align: left;"> <b>WAIT! Do not stop here. You must return to screen 1 now to add the alert to the Law Library.</b>
                    
                </div>`,
            },
            {
                title: "Step 2: Return to First Screen to 'Add to Library'",
                // Screenshot added
                screenshot: `CUSTOM_HTML:<div class="screenshot-box">
                    <img src="https://raw.githubusercontent.com/CBUser-RCM/Regology-User-Guides/35b91c656c15cb51517330f81314fa638906ee96/images/S4.png" class="screenshot" alt="Step 2 Screenshot" onerror="this.onerror=null; this.src='https://placehold.co/300x160/faf9fc/6A1B9A?text=Image+Placeholder'">
                </div>`,
                yellowBox: `<span class="direction-icon">ðŸŸ¡</span>Click the Add to Library button.<br>Please include all required metadata.<br><br>Select the Category and Entity from the dropdown fields.The Additional Information field should only be completed if the LRO has global or extraterritorial application.`,
                description: ``,
            },
            {
                title: "Step 3: Assign Owner and Submit", // Reverted title
                // Screenshot added
                screenshot: `CUSTOM_HTML:<div class="screenshot-box">
                    <img src="https://raw.githubusercontent.com/CBUser-RCM/Regology-User-Guides/35b91c656c15cb51517330f81314fa638906ee96/images/S5.png" class="screenshot" alt="Step 3 Screenshot" onerror="this.onerror=null; this.src='https://placehold.co/300x160/faf9fc/6A1B9A?text=Image+Placeholder'">
                </div>`,
                yellowBox: `<span class="direction-icon">ðŸŸ¡</span>Assign Legal DRI and Legal Review Team for ongoing monitoring of the LRO. In most cases, this will be you and your team.<br><br>Click Finish Adding to submit the information to RCM for review.`,
                description: `<div style="max-width: 570px;">
                
                </div>`,
            },
            {
                title: "Training Complete!",
                screenshot: "",
                yellowBox: `<span class="direction-icon">ðŸŸ¡</span>You're done! This process is quick and simpleâ€”thanks for helping keep our LRO Inventory up to date.<br><br>If you have questions or feedback, please contact the RCM Team.`,
                description: `<div style="max-width: 570px;">
                
                </div>`,
            }
        ];

        // Function to render the current step's content
        function renderStep() {
            const step = steps[currentStep];
            const slideContainer = document.getElementById('slide-container');
            
            let screenshotContent = '';
            
            // Check if the screenshot is defined and not using CUSTOM_HTML
            if (step.screenshot && !step.screenshot.startsWith('CUSTOM_HTML:')) {
                const imageUrl = getImageUrl(step.screenshot);

                // Standard single image rendering
                screenshotContent = `
                    <div class="screenshot-box">
                        <!-- Image src uses the full GITHUB_RAW_BASE_URL + filename -->
                        <img src="${imageUrl}" class="screenshot" alt="${step.title} Screenshot" onerror="this.onerror=null; this.src='https://placehold.co/300x160/faf9fc/6A1B9A?text=Image+Placeholder'">
                    </div>
                `;
            } else if (step.screenshot && step.screenshot.startsWith('CUSTOM_HTML:')) {
                // Render custom HTML directly (used for side-by-side images).
                // Note: Image URLs are resolved inside the custom HTML string via interpolation.
                screenshotContent = step.screenshot.substring('CUSTOM_HTML:'.length);
            }

            // Create yellow box HTML with conditional styling
            let yellowBoxHtml = '';
            if (step.yellowBox && currentStep !== 0) {
                // All yellow boxes now use the default rcm-yellow-box styling (1rem)
                yellowBoxHtml = `<div class="rcm-yellow-box">${step.yellowBox}</div>`;
            }

            // Build the HTML content for the current step
            slideContainer.innerHTML = `
                <div class="slide-inner">
                    <div class="step-title">${step.title}</div>
                    ${screenshotContent}
                    ${step.tldr ? step.tldr : ""}
                    <!-- Use the dynamically created yellow box HTML -->
                    ${yellowBoxHtml}
                    <div class="description">${step.description}</div>
                </div>
                <!-- Navigation moved inside slide-container -->
                <div class="p-4 border-t border-gray-200" style="min-height: 56px; display: flex; align-items: center; justify-content: space-between;">
                    <button id="prev-btn" onclick="prevStep()" class="bg-gray-300 text-gray-800 px-3 py-1 rounded-md font-medium shadow text-sm hover:bg-gray-400 transition">&larr; Previous</button>
                    <button id="next-btn" onclick="nextStep()" class="rcm-purple px-3 py-1 rounded-md font-medium shadow-md text-sm hover:opacity-90 transition">Next &rarr;</button>
                </div>
            `;
            
            // Update navigation buttons
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');

            // --- UPDATED LOGIC ---
            // Show/Hide Previous button
            if (currentStep === 0) {
                prevBtn.style.visibility = "hidden"; // Use visibility to keep layout
            } else {
                prevBtn.style.visibility = "visible";
            }
            
            // Show/Hide Next button
            if (currentStep === steps.length - 1) {
                nextBtn.style.display = "none"; // Hide completely
            } else {
                nextBtn.style.display = ""; // Show
            }
            // --- END UPDATED LOGIC ---
        }

        // Navigate to the next step
        function nextStep() {
            if (currentStep < steps.length - 1) {
                currentStep++;
                renderStep();
            }
        }
        
        // Navigate to the previous step
        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                renderStep();
            }
        }
        
        // Attach functions to the global scope for onclick attributes
        window.nextStep = nextStep;
        window.prevStep = prevStep;

        // Initialize on window load
        window.onload = renderStep;
    </script>
</body>
</html>
